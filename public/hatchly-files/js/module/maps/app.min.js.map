{"version":3,"sources":["jquery.zclip.js","templates.js","List.coffee","ZClipBoard.coffee","modals/ConfirmDeleteModal.coffee","modals/ConfirmFolderDeleteModal.coffee","modals/FileMetaModal.coffee","modals/FolderModal.coffee","extensions/pages/FileBrowser.coffee","extensions/pages/FileBrowserModal.coffee","extensions/pages/InlineFileUpload.coffee","Files.coffee","app.coffee"],"names":["jQuery","fn","zclip","params","length","settings","extend","ZeroClipboard","defaults","this","each","o","is","copy","isFunction","setMoviePath","path","clip","Client","bind","beforeCopy","afterCopy","setHandCursor","setCSSEffects","addEventListener","client","trigger","setText","triggerHandler","text","substr","removeClass","alert","clickAfter","glue","parent","window","reposition","toLowerCase","zclipId","data","clipElm","clientId","attr","replace","remove","unbind","unregister","hide","show","version","clients","moviePath","nextId","thingy","document","getElementById","addClass","style","display","name","className","classes","split","idx","k","splice","join","hasClass","match","RegExp","dispatch","id","eventName","args","receiveEvent","register","hasOwnProperty","getDOMObjectPosition","obj","stopObj","info","left","top","width","offsetWidth","height","offsetHeight","offsetLeft","offsetTop","elem","handlers","movieId","prototype","ready","movie","clipText","handCursorEnabled","cssEffects","appendElem","stylesToAdd","domElement","zIndex","parseInt","getElementsByTagName","box","div","createElement","position","addedStyle","appendChild","innerHTML","getHTML","html","flashvars","navigator","userAgent","location","href","destroy","body","removeChild","e","newText","func","toString","push","enabled","self","setTimeout","recoverActive","len","JST","views/file","__t","__p","__e","_","escape","file","views/folder","print","__j","call","arguments","Array","folder","views/grid","folders","i","files","views/thumbnail","itemClasses","public_url","image","is_image","thumbnail_public_url","filename","substring","$","ConfirmDeleteModal","ConfirmFolderDeleteModal","FileBrowser","FileBrowserModal","FileMetaModal","Files","FolderModal","InlineFileUpload","List","ZClip","ZClipboard","child","ctor","constructor","key","hasProp","__super__","setDropzoneDefaults","events","type","directory","_this","documentReady","on","preventDefault","triggerUpload","changeDirectory","scrollTop","haltScrollTop","animate","stop","find","startLoading","finishLoading","init","getDirectory","changeView","$clicked","currentTarget","Hatchly","currentDirectory","ajax","url","admin_url","done","textStatus","jqXHR","render","$container","filesTemplate","tooltip","container","attachEvents","err","dropzone","previewsContainer","upload_url","headers","X-CSRF-TOKEN","token","sending","xhr","formData","append","addedfile","$previewsContainer","renderedFile","options","last","closest","after","prepend","success","response","fileResponse","JSON","parse","first","replaceWith","error","errorMessage","bootbox","errors","console","log","message","target","superClass","apply","registerEvents","invoker","eventData","confirmed","setupModal","$invoker","invokerData","config","title","confirmCallback","Page","deleteFromFileManager","deleteFromForm","delete_url","responseSuccess","errorThrown","responseError","complete","responseComplete","$thumbnail","val","empty","fadeOut","close","modalContent","ConfirmModal","delete_folder_url","getModalContent","fileId","originalValue","prepareForModal","stopLoading","modal","dialog","onEscape","registerMetaFormEvents","addToken","off","clearMessages","generateMessages","callback","messages","status","responseJSON","CoreJST","el","addTokenValue","folderId","endpoint","prefix","reload","selectFile","$selected","returnSelectedFile","openFileBrowser","insertFile","contentWindow","$field","thumbnail","generateThumbnails","setupDropZone","paramName"],"mappings":"CAUA,SAAAA,GAEAA,EAAAC,GAAAC,MAAA,SAAAC,GAEA,GAAA,iBAAAA,IAAAA,EAAAC,OAAA,CAEA,IAAAC,EAAAL,EAAAM,UAAAC,cAAAC,SAAAL,GAEA,OAAAM,KAAAC,KAAA,WAEA,IAAAC,EAAAX,EAAAS,MAEA,GAAAE,EAAAC,GAAA,cAAA,iBAAAP,EAAAQ,MAAAb,EAAAc,WAAAT,EAAAQ,OAAA,CAEAN,cAAAQ,aAAAV,EAAAW,MACA,IAAAC,EAAA,IAAAV,cAAAW,OAEAlB,EAAAc,WAAAT,EAAAQ,OACAF,EAAAQ,KAAA,aAAAd,EAAAQ,MAGAb,EAAAc,WAAAT,EAAAe,aACAT,EAAAQ,KAAA,mBAAAd,EAAAe,YAGApB,EAAAc,WAAAT,EAAAgB,YACAV,EAAAQ,KAAA,kBAAAd,EAAAgB,WAGAJ,EAAAK,cAAAjB,EAAAiB,eAEAL,EAAAM,cAAAlB,EAAAkB,eAEAN,EAAAO,iBAAA,YAAA,SAAAC,GACAd,EAAAe,QAAA,gBAGAT,EAAAO,iBAAA,WAAA,SAAAC,GACAd,EAAAe,QAAA,gBAGAT,EAAAO,iBAAA,YAAA,SAAAC,GAEAd,EAAAe,QAAA,aAEA1B,EAAAc,WAAAT,EAAAe,aACAT,EAAAe,QAAA,oBAGA1B,EAAAc,WAAAT,EAAAQ,MAGAI,EAAAU,QAAAhB,EAAAiB,eAAA,eAFAX,EAAAU,QAAAtB,EAAAQ,QAOAI,EAAAO,iBAAA,WAAA,SAAAC,EAAAI,GAEA7B,EAAAc,WAAAT,EAAAgB,WAEAV,EAAAe,QAAA,oBAGAG,EAAAzB,OAAA,MACAyB,EAAAA,EAAAC,OAAA,EAAA,KAAA,YAAAD,EAAAzB,OAAA,KAAA,0BAGAO,EAAAoB,YAAA,SACAC,MAAA,iCAAAH,IAGAxB,EAAA4B,YACAtB,EAAAe,QAAA,WAKAT,EAAAiB,KAAAvB,EAAA,GAAAA,EAAAwB,SAAA,IAEAnC,EAAAoC,QAAAjB,KAAA,cAAA,WAAAF,EAAAoB,kBAMA,GAAA,iBAAAlC,EAEA,OAAAM,KAAAC,KAAA,WAEA,IAAAC,EAAAX,EAAAS,MAEAN,EAAAA,EAAAmC,cACA,IAAAC,EAAA5B,EAAA6B,KAAA,WACAC,EAAAzC,EAAA,IAAAuC,EAAA,UACAG,EAAAD,EAAAE,KAAA,MAAAC,QAAA,QAAA,KAAA,KAEA,UAAAzC,GAEAsC,EAAAI,SACAlC,EAAAoB,YAAA,gBACApB,EAAAmC,OAAA,cACAnC,EAAAmC,OAAA,oBACAnC,EAAAmC,OAAA,mBACAvC,cAAAwC,WAAAL,IAEA,QAAAvC,GAEAsC,EAAAO,OACArC,EAAAoB,YAAA,iBAEA,QAAA5B,GAEAsC,EAAAQ,UAjHA,CA2HAjD,QAKA,IAAAO,eAEA2C,QAAA,QACAC,WAEAC,UAAA,oBAEAC,OAAA,EAGA7C,UACAQ,KAAA,oBACAiB,YAAA,EACAX,eAAA,EACAC,eAAA,EAEAV,KAAA,KAGAO,WAAA,KACAC,UAAA,MAGArB,OAAA,SAAAsD,GAkCA,MAhCA,iBAAA,IAAAA,EAAAC,SAAAC,eAAAF,IACAA,EAAAG,WAEAH,EAAAN,KAAA,aAGAM,EAAAL,KAAA,WACAxC,KAAAiD,MAAAC,QAAA,IAEAL,EAAAG,SAAA,SAAAG,GACAnD,KAAAsB,YAAA6B,GACAnD,KAAAoD,WAAA,IAAAD,GAEAN,EAAAvB,YAAA,SAAA6B,GAGA,IAAA,IAFAE,EAAArD,KAAAoD,UAAAE,MAAA,OACAC,GAAA,EACAC,EAAA,EAAAA,EAAAH,EAAA1D,OAAA6D,IACAH,EAAAG,IAAAL,IACAI,EAAAC,EACAA,EAAAH,EAAA1D,QAOA,OAJA4D,GAAA,IACAF,EAAAI,OAAAF,EAAA,GACAvD,KAAAoD,UAAAC,EAAAK,KAAA,MAEA1D,MAEA6C,EAAAc,SAAA,SAAAR,GACA,QAAAnD,KAAAoD,UAAAQ,MAAA,IAAAC,OAAA,OAAAV,EAAA,WAGAN,GAGAvC,aAAA,SAAAC,GAEAP,KAAA2C,UAAApC,GAGAuD,SAAA,SAAAC,EAAAC,EAAAC,GAEA,IAAAjD,EAAAhB,KAAA0C,QAAAqB,GACA/C,GACAA,EAAAkD,aAAAF,EAAAC,IAIAE,SAAA,SAAAJ,EAAA/C,GAEAhB,KAAA0C,QAAAqB,GAAA/C,GAGAsB,WAAA,SAAAyB,GACA,iBAAA,GAAA/D,KAAA0C,QAAA0B,eAAAL,WACA/D,KAAA0C,QAAAqB,IAIAM,qBAAA,SAAAC,EAAAC,GAEA,IAAAC,GACAC,KAAA,EACAC,IAAA,EACAC,MAAAL,EAAAK,MAAAL,EAAAK,MAAAL,EAAAM,YACAC,OAAAP,EAAAO,OAAAP,EAAAO,OAAAP,EAAAQ,cAQA,OALAR,GAAAA,GAAAC,IACAC,EAAAC,MAAAH,EAAAS,WACAP,EAAAE,KAAAJ,EAAAU,WAGAR,GAGA/D,OAAA,SAAAwE,GAEAjF,KAAAkF,YAGAlF,KAAA+D,GAAAjE,cAAA8C,SACA5C,KAAAmF,QAAA,sBAAAnF,KAAA+D,GAGAjE,cAAAqE,SAAAnE,KAAA+D,GAAA/D,MAGAiF,GAAAjF,KAAAyB,KAAAwD,KAIAnF,cAAAW,OAAA2E,WAEArB,GAAA,EAEAsB,OAAA,EAEAC,MAAA,KAEAC,SAAA,GAEAC,mBAAA,EAEAC,YAAA,EAEAP,SAAA,KAEAzD,KAAA,SAAAwD,EAAAS,EAAAC,GAGA3F,KAAA4F,WAAA9F,cAAAP,OAAA0F,GAGA,IAAAY,EAAA,GACA7F,KAAA4F,WAAA3C,MAAA4C,SACAA,EAAAC,SAAA9F,KAAA4F,WAAA3C,MAAA4C,OAAA,IAAA,GAGA,iBAAA,EACAH,EAAA5F,cAAAP,OAAAmG,QACA,IAAA,IACAA,EAAA5C,SAAAiD,qBAAA,QAAA,IAIA,IAAAC,EAAAlG,cAAAuE,qBAAArE,KAAA4F,WAAAF,GAGA1F,KAAAiG,IAAAnD,SAAAoD,cAAA,OACAlG,KAAAiG,IAAA7C,UAAA,QACApD,KAAAiG,IAAAlC,GAAA,SAAA/D,KAAAmF,QACA5F,OAAAS,KAAA4F,YAAA7D,KAAA,UAAA,SAAA/B,KAAAmF,SACA,IAAAlC,EAAAjD,KAAAiG,IAAAhD,MAQA,GAPAA,EAAAkD,SAAA,WACAlD,EAAAwB,KAAAuB,EAAAvB,KAAA,KACAxB,EAAAyB,IAAAsB,EAAAtB,IAAA,KACAzB,EAAA0B,MAAAqB,EAAArB,MAAA,KACA1B,EAAA4B,OAAAmB,EAAAnB,OAAA,KACA5B,EAAA4C,OAAAA,EAEA,iBAAA,EACA,IAAA,IAAAO,KAAAT,EACA1C,EAAAmD,GAAAT,EAAAS,GAKAV,EAAAW,YAAArG,KAAAiG,KAEAjG,KAAAiG,IAAAK,UAAAtG,KAAAuG,QAAAP,EAAArB,MAAAqB,EAAAnB,SAGA0B,QAAA,SAAA5B,EAAAE,GAEA,IAAA2B,EAAA,GACAC,EAAA,MAAAzG,KAAA+D,GAAA,UAAAY,EAAA,WAAAE,EAUA,OARA6B,UAAAC,UAAA/C,MAAA,QAGA4C,GAAA,2EADAI,SAAAC,KAAAjD,MAAA,WAAA,WAAA,WACA,wFAAAe,EAAA,aAAAE,EAAA,SAAA7E,KAAAmF,QAAA,8IAAArF,cAAA6C,UAAA,yLAAA8D,EAAA,wDAGAD,GAAA,cAAAxG,KAAAmF,QAAA,UAAArF,cAAA6C,UAAA,uEAAAgC,EAAA,aAAAE,EAAA,WAAA7E,KAAAmF,QAAA,iLAAAsB,EAAA,2BAEAD,GAGAjE,KAAA,WAEAvC,KAAAiG,MACAjG,KAAAiG,IAAAhD,MAAAwB,KAAA,YAIAjC,KAAA,WAEAxC,KAAA4B,cAGAkF,QAAA,WAEA,GAAA9G,KAAA4F,YAAA5F,KAAAiG,IAAA,CACAjG,KAAAuC,OACAvC,KAAAiG,IAAAK,UAAA,GAEA,IAAAS,EAAAjE,SAAAiD,qBAAA,QAAA,GACA,IACAgB,EAAAC,YAAAhH,KAAAiG,KACA,MAAAgB,IAIAjH,KAAA4F,WAAA,KACA5F,KAAAiG,IAAA,OAIArE,WAAA,SAAAqD,GAQA,GALAA,IACAjF,KAAA4F,WAAA9F,cAAAP,OAAA0F,GACAjF,KAAA4F,YAAA5F,KAAAuC,QAGAvC,KAAA4F,YAAA5F,KAAAiG,IAAA,CACA,IAAAD,EAAAlG,cAAAuE,qBAAArE,KAAA4F,YACA3C,EAAAjD,KAAAiG,IAAAhD,MACAA,EAAAwB,KAAAuB,EAAAvB,KAAA,KACAxB,EAAAyB,IAAAsB,EAAAtB,IAAA,OAIAxD,QAAA,SAAAgG,GAEAlH,KAAAuF,SAAA2B,EACAlH,KAAAqF,OACArF,KAAAsF,MAAApE,QAAAgG,IAIAnG,iBAAA,SAAAiD,EAAAmD,GAGAnD,EAAAA,EAAAoD,WAAAvF,cAAAM,QAAA,MAAA,IACAnC,KAAAkF,SAAAlB,KACAhE,KAAAkF,SAAAlB,OAEAhE,KAAAkF,SAAAlB,GAAAqD,KAAAF,IAGAtG,cAAA,SAAAyG,GAEAtH,KAAAwF,kBAAA8B,EACAtH,KAAAqF,OACArF,KAAAsF,MAAAzE,cAAAyG,IAIAxG,cAAA,SAAAwG,GAEAtH,KAAAyF,aAAA6B,GAGApD,aAAA,SAAAF,EAAAC,GAKA,OAHAD,EAAAA,EAAAoD,WAAAvF,cAAAM,QAAA,MAAA,KAIA,IAAA,OAGAnC,KAAAsF,MAAAxC,SAAAC,eAAA/C,KAAAmF,SACA,IAAAoC,EAAAvH,KAEA,IAAAA,KAAAsF,MAIA,YAHAkC,WAAA,WACAD,EAAArD,aAAA,OAAA,OACA,GAKA,IAAAlE,KAAAqF,OAAAqB,UAAAC,UAAA/C,MAAA,YAAA8C,UAAAC,UAAA/C,MAAA,WAKA,OAJA4D,WAAA,WACAD,EAAArD,aAAA,OAAA,OACA,UACAlE,KAAAqF,OAAA,GAIArF,KAAAqF,OAAA,EACA,IACArF,KAAAsF,MAAApE,QAAAlB,KAAAuF,UACA,MAAA0B,IACA,IACAjH,KAAAsF,MAAAzE,cAAAb,KAAAwF,mBACA,MAAAyB,IACA,MAEA,IAAA,YACAjH,KAAA4F,YAAA5F,KAAAyF,aACAzF,KAAA4F,WAAA5C,SAAA,SACAhD,KAAAyH,eACAzH,KAAA4F,WAAA5C,SAAA,WAIA,MAEA,IAAA,WACAhD,KAAA4F,YAAA5F,KAAAyF,aACAzF,KAAAyH,eAAA,EACAzH,KAAA4F,WAAAjC,SAAA,YACA3D,KAAA4F,WAAAtE,YAAA,UACAtB,KAAAyH,eAAA,GAEAzH,KAAA4F,WAAAtE,YAAA,UAGA,MAEA,IAAA,YACAtB,KAAA4F,YAAA5F,KAAAyF,YACAzF,KAAA4F,WAAA5C,SAAA,UAEA,MAEA,IAAA,UACAhD,KAAA4F,YAAA5F,KAAAyF,aACAzF,KAAA4F,WAAAtE,YAAA,UACAtB,KAAAyH,eAAA,GAIA,GAAAzH,KAAAkF,SAAAlB,GACA,IAAA,IAAAT,EAAA,EAAAmE,EAAA1H,KAAAkF,SAAAlB,GAAArE,OAAA4D,EAAAmE,EAAAnE,IAAA,CACA,IAAA4D,EAAAnH,KAAAkF,SAAAlB,GAAAT,GAEAhE,OAAAc,WAAA8G,GAEAA,EAAAnH,KAAAiE,GACA,iBAAA,GAAA,GAAAkD,EAAAxH,OAEAwH,EAAA,GAAAA,EAAA,IAAAnH,KAAAiE,GACA,iBAAA,GAEAtC,OAAAwF,GAAAnH,KAAAiE,MC7eAjE,KAAA2H,KAAAC,aAAA,SAAAtD,KACAA,MAAAA,QACA,IAAAuD,IAAAC,IAAA,GAAAC,IAAAC,EAAAC,OACA,KAAA3D,IACAwD,KAAA,cAGA,OAFAD,IAAAF,IAAA,oBACAO,KAAAA,QACA,GAAAL,KACA,YAGA,OAAAC,KAEAK,eAAA,SAAA7D,KAGA,SAAA8D,QAAAN,KAAAO,IAAAC,KAAAC,UAAA,IAFAjE,MAAAA,QACA,IAAAuD,IAAAC,IAAA,GAAAC,IAAAC,EAAAC,OAAAI,IAAAG,MAAApD,UAAA1B,KAEA,KAAAY,IACAwD,KAAA,2GACAC,IAAAU,OAAA1E,IACA,wIACA0E,OAAA/G,OACAoG,KAAA,yFAEAA,KAAA,uFAEAA,KAAA,iDACAC,IAAAU,OAAAtF,MACA,uGACAsF,OAAA/G,SACAoG,KAAA,2UACAC,IAAAU,OAAA1E,IACA,sRACAgE,IAAAU,OAAA1E,IACA,cACAgE,IAAAU,OAAAtF,MACA,wLAEA2E,KAAA,sBAGA,OAAAA,KAEAY,aAAA,SAAApE,KAGA,SAAA8D,QAAAN,KAAAO,IAAAC,KAAAC,UAAA,IAFAjE,MAAAA,QACA,IAAAuD,IAAAC,IAAA,GAAAC,IAAAC,EAAAC,OAAAI,IAAAG,MAAApD,UAAA1B,KAEA,KAAAY,IACAwD,KAAA,aACAE,EAAA/H,KAAA0I,QAAA,SAAAF,EAAAG,GACAd,KAAA,cACA,OAAAD,IAAAF,IAAA,iBAAAc,OAAAA,KAAA,GAAAZ,KACA,WAEAC,KAAA,SACAE,EAAA/H,KAAA4I,MAAA,SAAAX,EAAAU,GACAd,KAAA,cACA,OAAAD,IAAAF,IAAA,eAAAO,KAAAA,KAAA,GAAAL,KACA,WAEAC,KAAA,UAGA,OAAAA,KAEAgB,kBAAA,SAAAxE,KAGA,SAAA8D,QAAAN,KAAAO,IAAAC,KAAAC,UAAA,IAFAjE,MAAAA,QACA,IAAAuD,IAAAC,IAAA,GAAAC,IAAAC,EAAAC,OAAAI,IAAAG,MAAApD,UAAA1B,KAEA,KAAAY,IAGAyE,YAAA,eAEAb,KAAAc,YACAD,aAAA,uBACAE,MAAAf,KAAAc,WACAd,KAAAgB,SAEAhB,KAAAiB,uBACAF,MAAAf,KAAAiB,sBAFAJ,aAAA,UAKAA,aAAA,qBACAE,MAAA,2CAGAnB,KAAA,iBACAC,IAAAgB,aACA,+DACAhB,IAAAkB,OACA,iFACAf,KAAAc,aACAlB,KAAA,yBACAI,KAAAgB,SAYApB,KAAA,6BACAC,IAAAG,KAAA/E,MACA,0BAbA2E,KAAA,iFAEAsB,SAAAlB,KAAA/E,KACAiG,SAAAzJ,OAAA,KACAyJ,SAAAlB,KAAA/E,KAAAkG,UAAA,EAAA,KAGAvB,KAAA,iDACAC,IAAAqB,UACA,8BAMAtB,KAAA,sBAEAA,KAAA,yDACAI,KAAAc,aACAlB,KAAA,8KACAwB,EAAA,QAAA3F,SAAA,iCACAmE,KAAA,4JACAC,IAAAG,KAAAnE,IACA,2IAEA+D,KAAA,mJACAC,IAAAG,KAAAc,YACA,2IAEAlB,KAAA,yKACAC,IAAAG,KAAAnE,IACA,wQACAgE,IAAAG,KAAAnE,IACA,cACAgE,IAAAG,KAAA/E,MACA,gKAEA2E,KAAA,aAGA,OAAAA,MCvIA,WAAA,IAAAyB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAApK,EAAA,SAAAqK,EAAAxI,GAAA,SAAAyI,IAAAnK,KAAAoK,YAAAF,EAAA,IAAA,IAAAG,KAAA3I,EAAA4I,EAAAhC,KAAA5G,EAAA2I,KAAAH,EAAAG,GAAA3I,EAAA2I,IAAA,OAAAF,EAAA/E,UAAA1D,EAAA0D,UAAA8E,EAAA9E,UAAA,IAAA+E,EAAAD,EAAAK,UAAA7I,EAAA0D,UAAA8E,uBAAAH,EAAA,WAKA,SAAAA,IACA/J,KAAAwK,sBACAxK,KAAAyK,4BALAC,KAAA,mBACAC,UAAA,eAMAH,oBAAA,yBAEAC,OAAA,kBACAnB,EAAAxG,UAAAuC,MAAA,SAAAuF,UAAA,kBACAA,EAAAC,iBADA,CAAA7K,OAGAsJ,EAAAxG,UAAAgI,GAAA,QAAA,wBAAA,SAAAF,UAAA,SAAA3D,UACAA,EAAA8D,iBACAH,EAAAI,iBAFA,CAAAhL,OAIAsJ,EAAAxG,UAAAgI,GAAA,QAAA,4BAAA,SAAAF,UAAA,SAAA3D,UACAA,EAAA8D,iBACAH,EAAAK,gBAAAhE,IAFA,CAAAjH,OAIAsJ,EAAA3H,QAAAmJ,GAAA,YAAA9K,KAAAkL,WACA5B,EAAA3H,QAAAmJ,GAAA,YAAA9K,KAAAmL,4BAEAD,UAAA,kBACA5B,EAAA,cAAA8B,SACAF,UAAA,GACA,kBAEAC,cAAA,kBACA7B,EAAA,cAAA+B,oBAEAL,cAAA,kBACA1B,EAAA,kBAAAgC,KAAA,eAAArK,QAAA,sBAEAsK,aAAA,kBACAjC,EAAA,mBAAAtG,SAAA,wBAEAwI,cAAA,kBACAxB,EAAAyB,OACAnC,EAAA,mBAAAhI,YAAA,wBAEAuJ,cAAA,kBAEA7K,KAAA0L,4BAEAC,WAAA,SAAAjB,UACA1K,KAAA0K,KAAAA,EACA1K,KAAA0L,4BAEAT,gBAAA,SAAAhE,GACA,IAAA2E,SAAAA,EAAAtC,EAAArC,EAAA4E,eAEAlK,OAAAmK,QAAAC,iBAAA/L,KAAA2K,UAAAiB,EAAA7J,KAAA,sBAEA/B,KAAA0L,4BAEAA,aAAA,kBAEA1L,KAAAuL,eAGAjC,EAAA0C,MACAC,IAAAH,QAAAI,UAAA,6BACAnK,MACA4I,UAAA3K,KAAA2K,aAEAwB,KAAA,SAAAvB,UAAA,SAAA7I,EAAAqK,EAAAC,UACAzB,EAAA/B,MAAA9G,EACAR,MAAA,MACAqJ,EAAA0B,OAAAvK,IAHA,CAAA/B,oBAMAsM,OAAA,SAAAvK,GAEA,IAAAwK,EAAAC,SAAAD,EAAAjD,EAAA,WAEAkD,EAAA7E,IAAA,SAAA3H,KAAA0K,OACA7B,MAAA9G,EAAA8G,MAAA9G,KACA4G,QAAA5G,EAAA4G,UAEA4D,EAAA/F,KAAAgG,GAEAlD,EAAA,2BAAAmD,SACAC,UAAA,SAEA1M,KAAAwL,gBACAxL,KAAA2M,4BAEAA,aAAA,WACA,IAAAC,EAAA,WACAtD,EAAA,kBAAAuD,UACAC,kBAAA,aACAb,IAAAH,QAAAjD,MAAAkE,WACAC,SACAC,eAAAnB,QAAAoB,OACAC,QAAA,SAAAvC,UAAA,SAAA1C,EAAAkF,EAAAC,GACA,GAAAzC,EAAAD,iBAAA0C,EAAAC,OAAA,eAAA1C,EAAAD,YADA,CAAA3K,MAEAuN,UAAA,SAAArF,GAEA,IAAAsF,EAAAC,EAGA,OAHAD,EAAAlE,EAAAtJ,KAAA0N,QAAAZ,mBAEAW,EAAA9F,IAAA,eAAAO,UACAsF,EAAAlC,KAAA,WAAA3L,OACA6N,EAAAlC,KAAA,WAAAqC,OAAAC,QAAA,MAAAC,MAAAJ,GAGAD,EAAAM,QAAAL,IACAM,QAAA,SAAA7F,EAAA8F,GAEA,IAAAR,EAAAS,EAAAR,SAAAD,EAAAlE,EAAAtJ,KAAA0N,QAAAZ,mBAEAmB,EAAAC,KAAAC,MAAAjG,EAAAkF,IAAAY,UAEAP,EAAA9F,IAAA,eAAAO,KAAA+F,IAEAT,EAAAlC,KAAA,sBAAA8C,QAAAR,QAAA,MAAAS,YAAAZ,GAEAzD,EAAAyB,QAEA6C,MAAA,SAAApG,EAAAqG,EAAAnB,UAEA9D,EAAAtJ,KAAA0N,QAAAZ,mBACAxB,KAAA,sBAAA8C,QAAAR,QAAA,MAAAxL,SAEAoM,QAAAjN,MAAAgN,EAAAE,OAAA,OAnCA,MAAAH,GAsCA,GAFA1B,EAAA0B,EACAI,QAAAC,IAAA/B,EAAAgC,SACA,+BAAAhC,EAAAgC,eACAF,QAAAC,IAAA,eAnIA,GCAA1E,EAAA,WAEA,SAAAA,IACAjK,KAAAyL,0BAEAA,KAAA,kBACAnC,EAAAxG,UAAAgI,GAAA,aAAA,cAAA,SAAA7D,GACA,IAAAqC,EAAArC,EAAA4H,QAAAlL,SAAA,oBAGA2F,EAAArC,EAAA4H,QAAApP,OACAc,KAAA,0CACAH,KAAA,WAGA,OAFAkJ,EAAArC,EAAA4H,QAAA9M,KAAA,SAGAnB,UAAA,aACAD,WAAA,eAEA2I,EAAArC,EAAA4H,QAAA7L,SAAA,kBAnBA,GCAAuG,EAAA,SAAAuF,GAEA,SAAAvF,IACAA,EAAAgB,UAAAH,YAAA2E,MAAA/O,KAAAuI,qCAEAyG,eAAA,kBACA1F,EAAAxG,UAAAgI,GAAA,eAAA,SAAA9K,KAAAiP,UAAA,IAAA,SAAArE,UAAA,SAAA3D,EAAAiI,GAEA,iBAFAA,QAEAA,EAAAC,YAGAlI,EAAA8D,iBACAH,EAAAwE,WAAAnI,GACA2D,EAAApI,SAPA,CAAAxC,oBASAoP,WAAA,SAAAnI,GACA,IAAAoI,EAAAC,SAAA/F,EAAAgB,UAAA6E,WAAAL,MAAA/O,KAAAuI,WACA8G,EAAA/F,EAAArC,EAAA4E,eACAyD,EAAAD,EAAAtN,KAAA/B,KAAAiP,WACAjP,KAAAuP,OAAAC,MAAA,aAAAF,EAAAnM,KAAA,iBAEAsM,gBAAA,SAAAxI,GAKA,GAHAyI,KAAAvP,GAAA,eACAH,KAAA2P,sBAAA1I,GAEAyI,KAAAvP,GAAA,cAAAuP,KAAAvP,GAAA,sBACAH,KAAA4P,eAAA3I,gBAEA0I,sBAAA,SAAA1I,GACA,IAAAoI,EAAAC,EAAAtB,EAkBA,OAlBAqB,EAAA/F,EAAArC,EAAA4E,eACAyD,EAAAD,EAAAtN,KAAA/B,KAAAiP,YAGAjB,EAAA1E,EAAA0C,MACAC,IAAAH,QAAAjD,MAAAgH,WAAA,IAAAP,EAAAvL,GACA2G,KAAA,SACAsC,SACAC,eAAAnB,QAAAoB,UAGAa,QAAA,SAAAnD,UAAA,SAAA7I,EAAAqK,EAAAC,UACAzB,EAAAkF,gBAAA7I,EAAAlF,EAAAqK,EAAAC,IADA,CAAArM,OAEAgO,EAAAM,MAAA,SAAA1D,UAAA,SAAAyB,EAAAD,EAAA2D,UACAnF,EAAAoF,cAAA/I,EAAAoF,EAAAD,EAAA2D,IADA,CAAA/P,OAEAgO,EAAAiC,SAAA,SAAArF,UAAA,SAAAyB,EAAAD,UACAxB,EAAAsF,iBAAAjJ,EAAAoF,EAAAD,IADA,CAAApM,QAGA,eAEA4P,eAAA,SAAA3I,GACA,IAAA2E,EAAAuE,SAAAvE,EAAAtC,EAAArC,EAAA4E,gBAEAsE,EAAAvE,EAAAgC,QAAA,wBAEAtC,KAAA,SAAA8E,IAAA,IAEAD,EAAA7E,KAAA,cACAvJ,KAAA,YAAA,IACAA,KAAA,MAAA,IACAA,KAAA,KAAA,IACAsO,qBAEAP,gBAAA,SAAA7I,EAAAlF,EAAAqK,EAAAC,UAEA/C,EAAArC,EAAA4E,eACA+B,QAAA,MAAA0C,UAAAlO,SAIApC,KAAAuQ,qBAEAP,cAAA,SAAA/I,EAAAoF,EAAAD,EAAA2D,UACArB,QAAAC,IAAAtC,EAAAD,EAAA2D,gBAEAG,iBAAA,SAAAjJ,EAAAoF,EAAAD,iBAEAoE,aAAA,WACA,MAAA,iFAEAvB,QAAA,WACA,MAAA,iBAjFA,CAAAtN,OAAA8O,cCAAjH,EAAA,SAAAsF,GAEA,SAAAtF,IACAA,EAAAe,UAAAH,YAAA2E,MAAA/O,KAAAuI,qCAEAyG,eAAA,kBACA1F,EAAAxG,UAAAgI,GAAA,eAAA,SAAA9K,KAAAiP,UAAA,IAAA,SAAArE,UAAA,SAAA3D,EAAAiI,GAEA,iBAFAA,QAEAA,EAAAC,YAGAlI,EAAA8D,iBACAH,EAAAwE,WAAAnI,GACA2D,EAAApI,SAPA,CAAAxC,oBASAoP,WAAA,SAAAnI,GACA,IAAAoI,EAAAC,SAAA9F,EAAAe,UAAA6E,WAAAL,MAAA/O,KAAAuI,WACA8G,EAAA/F,EAAArC,EAAA4E,eACAyD,EAAAD,EAAAtN,KAAA/B,KAAAiP,WACAjP,KAAAuP,OAAAC,MAAA,aAAAF,EAAAnM,KAAA,iBAEAsM,gBAAA,SAAAxI,UACAjH,KAAA2P,sBAAA1I,gBAEA0I,sBAAA,SAAA1I,GACA,IAAAoI,EAAAC,EAAAtB,EAkBA,OAlBAqB,EAAA/F,EAAArC,EAAA4E,eACAyD,EAAAD,EAAAtN,KAAA/B,KAAAiP,YAGAjB,EAAA1E,EAAA0C,MACAC,IAAAH,QAAAjD,MAAA6H,kBAAA,IAAApB,EAAAvL,GACA2G,KAAA,SACAsC,SACAC,eAAAnB,QAAAoB,UAGAa,QAAA,SAAAnD,UAAA,SAAA7I,EAAAqK,EAAAC,UACAzB,EAAAkF,gBAAA7I,EAAAlF,EAAAqK,EAAAC,IADA,CAAArM,OAEAgO,EAAAM,MAAA,SAAA1D,UAAA,SAAAyB,EAAAD,EAAA2D,UACAnF,EAAAoF,cAAA/I,EAAAoF,EAAAD,EAAA2D,IADA,CAAA/P,OAEAgO,EAAAiC,SAAA,SAAArF,UAAA,SAAAyB,EAAAD,UACAxB,EAAAsF,iBAAAjJ,EAAAoF,EAAAD,IADA,CAAApM,QAGA,eAEA8P,gBAAA,SAAA7I,EAAAlF,EAAAqK,EAAAC,UAEA/C,EAAArC,EAAA4E,eACA+B,QAAA,MAAA0C,UAAAlO,SAIApC,KAAAuQ,qBAEAP,cAAA,SAAA/I,EAAAoF,EAAAD,EAAA2D,UACArB,QAAAC,IAAAtC,EAAAD,EAAA2D,gBAEAG,iBAAA,SAAAjJ,EAAAoF,EAAAD,iBAEAoE,aAAA,WACA,MAAA,mFAEAvB,QAAA,WACA,MAAA,mBA/DA,CAAAtN,OAAA8O,cCAA9G,EAAA,WAEA,SAAAA,IACAL,EAAAxG,UAAAgI,GAAA,QAAA,wBAAA,SAAAF,UAAA,SAAA3D,UACAA,EAAA8D,iBACAH,EAAA+F,gBAAA1J,IAFA,CAAAjH,0BAIA2Q,gBAAA,SAAA1J,GACA,IAAA2E,EAAAgF,EAAAC,SAAAjF,EAAAtC,EAAArC,EAAA4E,eACA+E,EAAAhF,EAAA7J,KAAA,kBACA8O,EAAAjF,EAAApF,OACAxG,KAAAuL,aAAAK,GACAtC,EAAA0C,MACAC,IAAA,oCAAA2E,EACA7C,QAAA,SAAAnD,UAAA,SAAA7I,UACA6I,EAAAkG,gBAAA/O,IADA,CAAA/B,MAEAiQ,SAAA,SAAArF,UAAA,kBACAA,EAAAmG,YAAAnF,EAAAiF,IADA,CAAA7Q,qBAGAuL,aAAA,SAAAtE,UACAqC,EAAArC,GAAAT,KAAA,sDAEAuK,YAAA,SAAA9J,EAAA4J,UACAvH,EAAArC,GAAAT,KAAAqK,gBAEAC,gBAAA,SAAA/O,UAEA/B,KAAAwC,KAAAT,gBAEAS,KAAA,SAAAT,UACA/B,KAAAgR,MAAAxC,QAAAyC,QACArC,QAAA,kCAAA7M,EACAyN,MAAA,sBACA0B,SAAA,eAGAlR,KAAAgR,MAAAlG,GAAA,iBAAA,SAAAF,UAAA,kBACAA,EAAAuG,0BADA,CAAAnR,oBAGAmR,uBAAA,kBACAnR,KAAAoR,WACApR,KAAAgR,MAAAK,IAAA,8BAAAvG,GAAA,6BAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACA5F,EAAArC,EAAA4E,eAAAP,KAAA,2CAAAtI,SAAA,YACA4H,EAAA0G,iBAFA,CAAAtR,OAKAA,KAAAgR,MAAAK,IAAA,4BAAAvG,GAAA,2BAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACAtE,EAAA2G,iBAAArC,EAAAsC,SAAAzP,KAAA0P,SAAAvC,EAAAsC,SAAAnF,MAAAqF,QACAlK,WAAA,kBACAoD,EAAAoG,MAAAA,MAAA,SACA,MAJA,CAAAhR,OAMAA,KAAAgR,MAAAK,IAAA,0BAAAvG,GAAA,yBAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACAtE,EAAA2G,iBAAArC,EAAAsC,SAAAnF,MAAAsF,aAAAF,SAAAvC,EAAAsC,SAAAnF,MAAAqF,SADA,CAAA1R,OAGAA,KAAAgR,MAAAK,IAAA,6BAAAvG,GAAA,4BAAA,OAAA,SAAA7D,EAAAiI,UACA5F,EAAArC,EAAA4E,eAAAP,KAAA,2CAAAhK,YAAA,2BAEAiQ,iBAAA,SAAAE,EAAAC,UACA1R,KAAAsR,gBACAhI,EAAA,mBAAA9C,KAAAoL,QAAA,QAAAH,SAAAA,EAAAC,OAAAA,kBAEAJ,cAAA,kBACAhI,EAAA,mBAAA9C,KAAA,iBAEA4K,SAAA,kBAEApR,KAAAgR,MAAA1F,KAAA,QAAArL,KAAA,SAAA2K,UAAA,SAAAhC,EAAAiJ,UACAvI,EAAAuI,GAAAvG,KAAA,sBAAA3L,QACA2J,EAAAuI,GAAA/D,QAAA,uCACAlD,EAAAkH,cAAAD,IAHA,CAAA7R,oBAKA8R,cAAA,SAAAD,UACAvI,EAAAuI,GAAAvG,KAAA,sBAAA8E,IAAAtE,QAAAoB,UAzEA,GCAArD,EAAA,WAIA,SAAAA,IACAP,EAAAxG,UAAAgI,GAAA,QAAA,qBAAA,SAAAF,UAAA,SAAA3D,UACAA,EAAA8D,iBACAH,EAAA+F,gBAAA1J,IAFA,CAAAjH,OAGAsJ,EAAAxG,UAAAgI,GAAA,QAAA,oBAAA,SAAAF,UAAA,SAAA3D,UACAA,EAAA8D,iBACAH,EAAA+F,gBAAA1J,IAFA,CAAAjH,cANA6J,EAAAkC,iBAAA,iBAUA4E,gBAAA,SAAA1J,EAAA8K,GACA,IAAAnG,EAAAoG,EAAAnB,mBADAkB,GAAA,IACAnG,EAAAtC,EAAArC,EAAA4E,gBACA9J,KAAA,iBACAgQ,EAAAnG,EAAA7J,KAAA,gBAEA8O,EAAAjF,EAAApF,OACAxG,KAAAuL,aAAAK,GAEAoG,EAAA,iCAEAD,IACAA,EAAA,GAEAC,EAAAA,EAAA,IAAAD,EAEApQ,OAAAmK,QAAAC,mBACAiG,EAAAA,EAAA,IAAArQ,OAAAA,OAAAmK,QAAAC,kBAEAzC,EAAA0C,MACAC,IAAA+F,EACAjE,QAAA,SAAAnD,UAAA,SAAA7I,UACA6I,EAAAkG,gBAAA/O,EAAAgQ,IADA,CAAA/R,MAEAiQ,SAAA,SAAArF,UAAA,kBACAA,EAAAmG,YAAAnF,EAAAiF,IADA,CAAA7Q,qBAGAuL,aAAA,SAAAtE,UACAqC,EAAArC,GAAAT,KAAA,sDAEAuK,YAAA,SAAA9J,EAAA4J,UACAvH,EAAArC,GAAAT,KAAAqK,gBAEAC,gBAAA,SAAA/O,EAAAgQ,UAEA/R,KAAAwC,KAAAT,EAAAgQ,gBAEAvP,KAAA,SAAAT,EAAAgQ,GACA,IAAAE,SAAAA,EAAAF,EAAA,OAAA,aACA/R,KAAAgR,MAAAxC,QAAAyC,QACArC,QAAA,kCAAA7M,EACAyN,MAAAyC,EAAA,UACAf,SAAA,eAGAlR,KAAAgR,MAAAlG,GAAA,iBAAA,SAAAF,UAAA,kBACAA,EAAAuG,0BADA,CAAAnR,oBAGAmR,uBAAA,kBACAnR,KAAAoR,WACApR,KAAAgR,MAAAK,IAAA,8BAAAvG,GAAA,6BAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACA5F,EAAArC,EAAA4E,eAAAP,KAAA,2CAAAtI,SAAA,YACA4H,EAAA0G,iBAFA,CAAAtR,OAKAA,KAAAgR,MAAAK,IAAA,4BAAAvG,GAAA,2BAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACAtE,EAAA2G,iBAAArC,EAAAsC,SAAAzP,KAAA0P,SAAAvC,EAAAsC,SAAAnF,MAAAqF,QACAlK,WAAA,kBACAoD,EAAAoG,MAAAA,MAAA,QACArP,OAAAiF,SAAAsL,QAAA,IACA,MALA,CAAAlS,OAOAA,KAAAgR,MAAAK,IAAA,0BAAAvG,GAAA,yBAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAiI,UACAtE,EAAA2G,iBAAArC,EAAAsC,SAAAnF,MAAAsF,aAAAF,SAAAvC,EAAAsC,SAAAnF,MAAAqF,SADA,CAAA1R,OAGAA,KAAAgR,MAAAK,IAAA,6BAAAvG,GAAA,4BAAA,OAAA,SAAA7D,EAAAiI,UACA5F,EAAArC,EAAA4E,eAAAP,KAAA,2CAAAhK,YAAA,2BAEAiQ,iBAAA,SAAAE,EAAAC,UACA1R,KAAAsR,gBACAhI,EAAA,mBAAA9C,KAAAoL,QAAA,QAAAH,SAAAA,EAAAC,OAAAA,kBAEAJ,cAAA,kBACAhI,EAAA,mBAAA9C,KAAA,iBAEA4K,SAAA,kBAEApR,KAAAgR,MAAA1F,KAAA,QAAArL,KAAA,SAAA2K,UAAA,SAAAhC,EAAAiJ,UACAvI,EAAAuI,GAAAvG,KAAA,sBAAA3L,QACA2J,EAAAuI,GAAA/D,QAAA,uCACAlD,EAAAkH,cAAAD,IAHA,CAAA7R,oBAKA8R,cAAA,SAAAD,UACAvI,EAAAuI,GAAAvG,KAAA,sBAAA8E,IAAAtE,QAAAoB,UA7FA,GCAAzD,EAAA,WAEA,SAAAA,IACAzJ,KAAAgP,oCAEAA,eAAA,kBACA1F,EAAAxG,UAAAgI,GAAA,QAAA,qBAAA,SAAAF,UAAA,SAAA3D,UACA2D,EAAAuH,WAAAlL,IADA,CAAAjH,oBAGAmS,WAAA,SAAAlL,GAEA,IAAAmL,EAAArO,SAAAqO,EAAA9I,EAAArC,EAAA4E,eACA9H,EAAAqO,EAAArQ,KAAA,eAEA/B,KAAAqS,mBAAAtO,gBAEAsO,mBAAA,SAAAtO,UACAuF,EAAA0C,MACAC,IAAA,+BAAAlI,EACA2G,KAAA,QACAqD,QAAA,SAAAhM,EAAAqK,EAAAC,UAEA3K,OAAA4H,EAAA,QAAArI,QAAA,8BAAAc,EAAAmG,MACAxG,OAAA4H,EAAA,QAAArI,QAAA,qCAAAc,EAAAmG,WAvBA,GCAAwB,EAAA,WAEA,SAAAA,IACA1J,KAAAgP,iBAEAhP,KAAA4L,SAAA,KAEA5L,KAAAgR,MAAA,wBAEAhC,eAAA,kBACA1F,EAAAxG,UAAAgI,GAAA,QAAA,8BAAA,SAAAF,UAAA,SAAA3D,UACA2D,EAAAgB,SAAAtC,EAAArC,EAAA4E,eACAjB,EAAA0H,mBAFA,CAAAtS,OAIAsJ,EAAAxG,UAAAgI,GAAA,qCAAA,OAAA,SAAAF,UAAA,SAAA3D,EAAAlF,GACA,GAAA6I,EAAAgB,gBACAhB,EAAA2H,WAAAxQ,IAFA,CAAA/B,oBAIAsS,gBAAA,kBACAtS,KAAAgR,MAAAxC,QAAAyC,QACArC,QAAA,gBAAA9C,QAAAI,UAAA,uFAEAlM,KAAAgR,MAAAlG,GAAA,iBAAA,SAAAF,UAAA,kBACAA,EAAAoG,MAAA1F,KAAA,UAAA,GAAAkH,cAAA5L,SAAAgE,EAAAoG,MAAA1F,KAAA,UAAApJ,KAAA,QADA,CAAAlC,OAEAA,KAAAgR,MAAAlG,GAAA,kBAAA,SAAAF,UAAA,kBACAA,EAAAgB,UAAA,GADA,CAAA5L,oBAGAuS,WAAA,SAAArK,GACA,IAAAuK,EAAAtC,SAAAsC,EAAAzS,KAAA4L,SAAAgC,QAAA,wBAEAuC,EAAAsC,EAAAnH,KAAA,eACApJ,KAAA,iBAAA,IAEAiO,EAAAjO,KAAA,WAAAgG,EAAAwK,UAAAxK,EAAAwK,UAAA1J,WAAAd,EAAAc,YACAmH,EAAAjO,KAAA,UAAAgG,EAAAnE,IACAoM,EAAAjO,KAAA,aAAAgG,EAAAgB,UACAiH,EAAAjO,KAAA,iBAAAgG,EAAA/E,MAEAsP,EAAAnH,KAAA,eAAA6E,EAAApO,KAAA,cAAA,MAAAqO,IAAAlI,EAAAnE,IAEA/D,KAAAgR,MAAAA,MAAA,QAEA1H,EAAA,QAAArI,QAAA,+BA1CA,GCAA6I,EAAA,WAEA,SAAAA,IACA9J,KAAA2S,qBACA3S,KAAA4S,gBACA5S,KAAAgP,oCAEAA,eAAA,kBACA1F,EAAA,QAAAwB,GAAA,2BAAA,SAAAF,UAAA,kBACAA,EAAA+H,qBACA/H,EAAAgI,iBAFA,CAAA5S,oBAIA2S,mBAAA,kBACArJ,EAAA,oBAAArJ,KAAA,SAAA2I,EAAAiJ,GACA,IAAAa,EAAA,GAAA,cAAApJ,EAAAuI,GAAA3P,KAAA,mBAAA,KAAAoH,EAAAuI,GAAA3P,KAAA,mBAEAwQ,EAAA/K,IAAA,oBACAO,MACAc,WAAAM,EAAAuI,GAAA3P,KAAA,YACAiB,KAAAmG,EAAAuI,GAAA3P,KAAA,kBACA6B,GAAAuF,EAAAuI,GAAA3P,KAAA,WACAgH,SAAAI,EAAAuI,GAAA3P,KAAA,iBAGAoH,EAAAuI,GAAArL,KAAAkM,GACApJ,EAAAuI,GAAA3P,KAAA,iBAAA,eACA8H,EAAAyB,oBAEAmH,cAAA,kBACAtJ,EAAA,kBAAArJ,KAAA,SAAA2I,EAAAiJ,GACA,IAAA1O,EAAA,IAAAmG,EAAAuI,GAAAlO,SAAA,uBAEAR,EAAAmG,EAAAuI,GAAA9P,KAAA,QACAuH,EAAAuI,GAAAhF,UACAC,kBAAA,qBAAA3J,EAAA,KACA8I,IAAA3C,EAAAuI,GAAA9P,KAAA,UACA8Q,UAAA,OACA7F,SACAC,eAAAnB,QAAAoB,OACAK,UAAA,SAAArF,GAEA,IAAAsF,EAAAC,SAAAD,EAAAlE,EAAAtJ,KAAA0N,QAAAZ,mBAEAW,EAAA9F,IAAA,oBAAAO,UAEAsF,EAAAhH,KAAAiH,IACAM,QAAA,SAAA7F,EAAA8F,GAEA,IAAAR,EAAAS,EAAAR,SAAAD,EAAAlE,EAAAtJ,KAAA0N,QAAAZ,mBAEAmB,EAAAC,KAAAC,MAAAjG,EAAAkF,IAAAY,UAEAP,EAAA9F,IAAA,oBAAAO,KAAA+F,IAEAT,EAAAlC,KAAA,iBAAA+C,YAAAZ,GAEAnE,EAAA,UAAAnG,EAAA,MAAAiN,IAAAnC,EAAAlK,IACAiG,EAAAyB,QAEA6C,MAAA,SAAApG,EAAAqG,EAAAnB,UAEA9D,EAAAtJ,KAAA0N,QAAAZ,mBACAxB,KAAA,iBAAAlJ,SAEAoM,QAAAjN,MAAAgN,EAAAE,OAAA,SAEAnF,EAAA,2BAAAmD,SACAC,UAAA,YAnEA,GCAA9C,EAAA,kBAEA,WACA,IAAAG,GAHA,GCCAC,EAAA,IAAAC,EACA,IAAAV,EAEAmG,KAAAvP,GAAA,gBACA,IAAAqJ,EACA,IAAAI,EAAA,IAAAD,EAAA,IAAAE,IAEA6F,KAAAvP,GAAA,eACA,IAAAuJ,EACA,IAAAI,EAAA,IAAAH,IAEA+F,KAAAvP,GAAA,sBACA,IAAAsJ","file":"../app.min.js","sourcesContent":["/*\n * zClip :: jQuery ZeroClipboard v1.1.5\n * Originally forked from: http://steamdev.com/zclip\n *\n * Copyright 2011, SteamDev\n *\n * Released under the MIT license.\n * https://github.com/patricklodder/jquery-zclip/blob/master/LICENSE\n */\n\n(function (jQuery) {\n\n    jQuery.fn.zclip = function (params) {\n\n        if (typeof params == \"object\" && !params.length) {\n\n            var settings = jQuery.extend({}, ZeroClipboard.defaults, params);\n\n            return this.each(function () {\n\n                var o = jQuery(this);\n\n                if (o.is(':visible') && (typeof settings.copy == 'string' || jQuery.isFunction(settings.copy))) {\n\n                    ZeroClipboard.setMoviePath(settings.path);\n                    var clip = new ZeroClipboard.Client();\n\n                    if (jQuery.isFunction(settings.copy)) {\n                        o.bind('zClip_copy', settings.copy);\n                    }\n\n                    if (jQuery.isFunction(settings.beforeCopy)) {\n                        o.bind('zClip_beforeCopy', settings.beforeCopy);\n                    }\n\n                    if (jQuery.isFunction(settings.afterCopy)) {\n                        o.bind('zClip_afterCopy', settings.afterCopy);\n                    }\n\n                    clip.setHandCursor(settings.setHandCursor);\n\n                    clip.setCSSEffects(settings.setCSSEffects);\n\n                    clip.addEventListener('mouseOver', function (client) {\n                        o.trigger('mouseenter');\n                    });\n\n                    clip.addEventListener('mouseOut', function (client) {\n                        o.trigger('mouseleave');\n                    });\n\n                    clip.addEventListener('mouseDown', function (client) {\n\n                        o.trigger('mousedown');\n\n                        if (jQuery.isFunction(settings.beforeCopy)) {\n                            o.trigger('zClip_beforeCopy');\n                        }\n\n                        if (!jQuery.isFunction(settings.copy)) {\n                            clip.setText(settings.copy);\n                        } else {\n                            clip.setText(o.triggerHandler('zClip_copy'));\n                        }\n\n                    });\n\n                    clip.addEventListener('complete', function (client, text) {\n\n                        if (jQuery.isFunction(settings.afterCopy)) {\n\n                            o.trigger('zClip_afterCopy');\n\n                        } else {\n                            if (text.length > 500) {\n                                text = text.substr(0, 500) + \"...\\n\\n(\" + (text.length - 500) + \" characters not shown)\";\n                            }\n\n                            o.removeClass('hover');\n                            alert(\"Copied text to clipboard:\\n\\n \" + text);\n                        }\n\n                        if (settings.clickAfter) {\n                            o.trigger('click');\n                        }\n\n                    });\n\n                    clip.glue(o[0], o.parent()[0]);\n\n                    jQuery(window).bind('load resize', function () {clip.reposition();});\n\n                }\n\n            });\n\n        } else if (typeof params == \"string\") {\n\n            return this.each(function () {\n\n                var o = jQuery(this);\n\n                params = params.toLowerCase();\n                var zclipId = o.data('zclipId');\n                var clipElm = jQuery('#' + zclipId + '.zclip');\n                var clientId = clipElm.attr('id').replace(/^.*_/g, '') || null;\n\n                if (params == \"remove\") {\n\n                    clipElm.remove();\n                    o.removeClass('active hover');\n                    o.unbind('zClip_copy');\n                    o.unbind('zClip_beforeCopy');\n                    o.unbind('zClip_afterCopy');\n                    ZeroClipboard.unregister(clientId);\n\n                } else if (params == \"hide\") {\n\n                    clipElm.hide();\n                    o.removeClass('active hover');\n\n                } else if (params == \"show\") {\n\n                    clipElm.show();\n\n                }\n\n            });\n\n        }\n\n    };\n\n})(jQuery);\n\n// ZeroClipboard\n// Simple Set Clipboard System\n// Author: Joseph Huckaby\nvar ZeroClipboard = {\n\n    version: \"1.0.7\",\n    clients: {},\n    // registered upload clients on page, indexed by id\n    moviePath: 'ZeroClipboard.swf',\n    // URL to movie\n    nextId: 1,\n    // ID of next movie\n\n    defaults: {\n        path: 'ZeroClipboard.swf',\n        clickAfter: true,\n        setHandCursor: true,\n        setCSSEffects: true,\n\n        copy: null,\n        // a string or function that returns string\n\n        beforeCopy: null,\n        afterCopy: null\n    },\n\n    jQuery: function (thingy) {\n        // simple DOM lookup utility function\n        if (typeof(thingy) == 'string') thingy = document.getElementById(thingy);\n        if (!thingy.addClass) {\n            // extend element with a few useful methods\n            thingy.hide = function () {\n                // this.style.display = 'none';\n            };\n            thingy.show = function () {\n                this.style.display = '';\n            };\n            thingy.addClass = function (name) {\n                this.removeClass(name);\n                this.className += ' ' + name;\n            };\n            thingy.removeClass = function (name) {\n                var classes = this.className.split(/\\s+/);\n                var idx = -1;\n                for (var k = 0; k < classes.length; k++) {\n                    if (classes[k] == name) {\n                        idx = k;\n                        k = classes.length;\n                    }\n                }\n                if (idx > -1) {\n                    classes.splice(idx, 1);\n                    this.className = classes.join(' ');\n                }\n                return this;\n            };\n            thingy.hasClass = function (name) {\n                return !!this.className.match(new RegExp(\"\\\\s*\" + name + \"\\\\s*\"));\n            };\n        }\n        return thingy;\n    },\n\n    setMoviePath: function (path) {\n        // set path to ZeroClipboard.swf\n        this.moviePath = path;\n    },\n\n    dispatch: function (id, eventName, args) {\n        // receive event from flash movie, send to client\n        var client = this.clients[id];\n        if (client) {\n            client.receiveEvent(eventName, args);\n        }\n    },\n\n    register: function (id, client) {\n        // register new client to receive events\n        this.clients[id] = client;\n    },\n\n    unregister: function (id) {\n        if (typeof(id) === 'number' && this.clients.hasOwnProperty(id)) {\n            delete this.clients[id];\n        }\n    },\n\n    getDOMObjectPosition: function (obj, stopObj) {\n        // get absolute coordinates for dom element\n        var info = {\n            left: 0,\n            top: 0,\n            width: obj.width ? obj.width : obj.offsetWidth,\n            height: obj.height ? obj.height : obj.offsetHeight\n        };\n\n        if (obj && (obj != stopObj)) {\n            info.left += obj.offsetLeft;\n            info.top += obj.offsetTop;\n        }\n\n        return info;\n    },\n\n    Client: function (elem) {\n        // constructor for new simple upload client\n        this.handlers = {};\n\n        // unique ID\n        this.id = ZeroClipboard.nextId++;\n        this.movieId = 'ZeroClipboardMovie_' + this.id;\n\n        // register client with singleton to receive flash events\n        ZeroClipboard.register(this.id, this);\n\n        // create movie\n        if (elem) this.glue(elem);\n    }\n};\n\nZeroClipboard.Client.prototype = {\n\n    id: 0,\n    // unique ID for us\n    ready: false,\n    // whether movie is ready to receive events or not\n    movie: null,\n    // reference to movie object\n    clipText: '',\n    // text to copy to clipboard\n    handCursorEnabled: true,\n    // whether to show hand cursor, or default pointer cursor\n    cssEffects: true,\n    // enable CSS mouse effects on dom container\n    handlers: null,\n    // user event handlers\n    glue: function (elem, appendElem, stylesToAdd) {\n        // glue to DOM element\n        // elem can be ID or actual DOM element object\n        this.domElement = ZeroClipboard.jQuery(elem);\n\n        // float just above object, or zIndex 99 if dom element isn't set\n        var zIndex = 99;\n        if (this.domElement.style.zIndex) {\n            zIndex = parseInt(this.domElement.style.zIndex, 10) + 1;\n        }\n\n        if (typeof(appendElem) == 'string') {\n            appendElem = ZeroClipboard.jQuery(appendElem);\n        } else if (typeof(appendElem) == 'undefined') {\n            appendElem = document.getElementsByTagName('body')[0];\n        }\n\n        // find X/Y position of domElement\n        var box = ZeroClipboard.getDOMObjectPosition(this.domElement, appendElem);\n\n        // create floating DIV above element\n        this.div = document.createElement('div');\n        this.div.className = \"zclip\";\n        this.div.id = \"zclip-\" + this.movieId;\n        jQuery(this.domElement).data('zclipId', 'zclip-' + this.movieId);\n        var style = this.div.style;\n        style.position = 'absolute';\n        style.left = '' + box.left + 'px';\n        style.top = '' + box.top + 'px';\n        style.width = '' + box.width + 'px';\n        style.height = '' + box.height + 'px';\n        style.zIndex = zIndex;\n\n        if (typeof(stylesToAdd) == 'object') {\n            for (var addedStyle in stylesToAdd) {\n                style[addedStyle] = stylesToAdd[addedStyle];\n            }\n        }\n\n        // style.backgroundColor = '#f00'; // debug\n        appendElem.appendChild(this.div);\n\n        this.div.innerHTML = this.getHTML(box.width, box.height);\n    },\n\n    getHTML: function (width, height) {\n        // return HTML for movie\n        var html = '';\n        var flashvars = 'id=' + this.id + '&width=' + width + '&height=' + height;\n\n        if (navigator.userAgent.match(/MSIE/)) {\n            // IE gets an OBJECT tag\n            var protocol = location.href.match(/^https/i) ? 'https://' : 'http://';\n            html += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" codebase=\"' + protocol + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"' + width + '\" height=\"' + height + '\" id=\"' + this.movieId + '\" align=\"middle\"><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"' + ZeroClipboard.moviePath + '\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"' + flashvars + '\"/><param name=\"wmode\" value=\"transparent\"/></object>';\n        } else {\n            // all other browsers get an EMBED tag\n            html += '<embed id=\"' + this.movieId + '\" src=\"' + ZeroClipboard.moviePath + '\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"' + width + '\" height=\"' + height + '\" name=\"' + this.movieId + '\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"' + flashvars + '\" wmode=\"transparent\" />';\n        }\n        return html;\n    },\n\n    hide: function () {\n        // temporarily hide floater offscreen\n        if (this.div) {\n            this.div.style.left = '-2000px';\n        }\n    },\n\n    show: function () {\n        // show ourselves after a call to hide()\n        this.reposition();\n    },\n\n    destroy: function () {\n        // destroy control and floater\n        if (this.domElement && this.div) {\n            this.hide();\n            this.div.innerHTML = '';\n\n            var body = document.getElementsByTagName('body')[0];\n            try {\n                body.removeChild(this.div);\n            } catch (e) {\n                //do nothing\n            }\n\n            this.domElement = null;\n            this.div = null;\n        }\n    },\n\n    reposition: function (elem) {\n        // reposition our floating div, optionally to new container\n        // warning: container CANNOT change size, only position\n        if (elem) {\n            this.domElement = ZeroClipboard.jQuery(elem);\n            if (!this.domElement) this.hide();\n        }\n\n        if (this.domElement && this.div) {\n            var box = ZeroClipboard.getDOMObjectPosition(this.domElement);\n            var style = this.div.style;\n            style.left = '' + box.left + 'px';\n            style.top = '' + box.top + 'px';\n        }\n    },\n\n    setText: function (newText) {\n        // set text to be copied to clipboard\n        this.clipText = newText;\n        if (this.ready) {\n            this.movie.setText(newText);\n        }\n    },\n\n    addEventListener: function (eventName, func) {\n        // add user event listener for event\n        // event types: load, queueStart, fileStart, fileComplete, queueComplete, progress, error, cancel\n        eventName = eventName.toString().toLowerCase().replace(/^on/, '');\n        if (!this.handlers[eventName]) {\n            this.handlers[eventName] = [];\n        }\n        this.handlers[eventName].push(func);\n    },\n\n    setHandCursor: function (enabled) {\n        // enable hand cursor (true), or default arrow cursor (false)\n        this.handCursorEnabled = enabled;\n        if (this.ready) {\n            this.movie.setHandCursor(enabled);\n        }\n    },\n\n    setCSSEffects: function (enabled) {\n        // enable or disable CSS effects on DOM container\n        this.cssEffects = !! enabled;\n    },\n\n    receiveEvent: function (eventName, args) {\n        // receive event from flash\n        eventName = eventName.toString().toLowerCase().replace(/^on/, '');\n\n        // special behavior for certain events\n        switch (eventName) {\n        case 'load':\n            // movie claims it is ready, but in IE this isn't always the case...\n            // bug fix: Cannot extend EMBED DOM elements in Firefox, must use traditional function\n            this.movie = document.getElementById(this.movieId);\n            var self = this;\n\n            if (!this.movie) {\n                setTimeout(function () {\n                    self.receiveEvent('load', null);\n                }, 1);\n                return;\n            }\n\n            // firefox on pc needs a \"kick\" in order to set these in certain cases\n            if (!this.ready && navigator.userAgent.match(/Firefox/) && navigator.userAgent.match(/Windows/)) {\n                setTimeout(function () {\n                    self.receiveEvent('load', null);\n                }, 100);\n                this.ready = true;\n                return;\n            }\n\n            this.ready = true;\n            try {\n                this.movie.setText(this.clipText);\n            } catch (e) {}\n            try {\n                this.movie.setHandCursor(this.handCursorEnabled);\n            } catch (e) {}\n            break;\n\n        case 'mouseover':\n            if (this.domElement && this.cssEffects) {\n                this.domElement.addClass('hover');\n                if (this.recoverActive) {\n                    this.domElement.addClass('active');\n                }\n\n            }\n            break;\n\n        case 'mouseout':\n            if (this.domElement && this.cssEffects) {\n                this.recoverActive = false;\n                if (this.domElement.hasClass('active')) {\n                    this.domElement.removeClass('active');\n                    this.recoverActive = true;\n                }\n                this.domElement.removeClass('hover');\n\n            }\n            break;\n\n        case 'mousedown':\n            if (this.domElement && this.cssEffects) {\n                this.domElement.addClass('active');\n            }\n            break;\n\n        case 'mouseup':\n            if (this.domElement && this.cssEffects) {\n                this.domElement.removeClass('active');\n                this.recoverActive = false;\n            }\n            break;\n        } // switch eventName\n        if (this.handlers[eventName]) {\n            for (var idx = 0, len = this.handlers[eventName].length; idx < len; idx++) {\n                var func = this.handlers[eventName][idx];\n\n                if (jQuery.isFunction(func)) {\n                    // actual function reference\n                    func(this, args);\n                } else if ((typeof(func) == 'object') && (func.length == 2)) {\n                    // PHP style object + method, i.e. [myObject, 'myMethod']\n                    func[0][func[1]](this, args);\n                } else if (typeof(func) == 'string') {\n                    // name of function\n                    window[func](this, args);\n                }\n            } // foreach event handler defined\n        } // user defined handler for event\n    }\n\n};\n","this.JST = {\"views/file\": function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<li>\\n    ' +\n((__t = ( JST['views/thumbnail']({\n        file: file\n    }) )) == null ? '' : __t) +\n'\\n</li>\\n';\n\n}\nreturn __p\n},\n\"views/folder\": function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<li>\\n    <div class=\"gallery-item with-controls folder\">\\n        <a href=\"#\" data-navigate-directory=\"' +\n__e( folder.id ) +\n'\">\\n            <div class=\"content\">\\n                <div class=\"o\">\\n                    <div class=\"i\">\\n                        ';\n if (folder.parent) { ;\n__p += '\\n                            <i class=\"fa fa-level-up\"></i>\\n                        ';\n } else { ;\n__p += '\\n                            <i class=\"fa fa-folder\"></i>\\n                        ';\n } ;\n__p += '\\n                        <p class=\"filename\">' +\n__e( folder.name ) +\n'</p>\\n                    </div>\\n                </div>\\n            </div>\\n        </a>\\n        ';\n if (!folder.parent) { ;\n__p += '\\n            <div class=\"controls\">\\n                <div class=\"controls-inner\">\\n                    <div class=\"btn-group\" role=\"group\" aria-label=\"actions\">\\n                        <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Edit\" data-trigger=\"hover\" data-edit-folder=\"' +\n__e( folder.id ) +\n'\">\\n                            <i class=\"fa fa-pencil\"></i>\\n                        </button>\\n                        <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Delete\" data-trigger=\"hover\" data-delete-folder=\\'{ \"id\": ' +\n__e( folder.id ) +\n', \"name\": \"' +\n__e( folder.name ) +\n'\" }\\'>\\n                            <i class=\"fa fa-close\"></i>\\n                        </button>\\n                    </div>\\n                </div>\\n            </div>\\n        ';\n } ;\n__p += '\\n    </div>\\n</li>';\n\n}\nreturn __p\n},\n\"views/grid\": function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul>\\n    ';\n _.each(folders, function(folder, i) { ;\n__p += '\\n        ' +\n((__t = ( JST['views/folder']({ folder: folder }) )) == null ? '' : __t) +\n'\\n    ';\n }); ;\n__p += '\\n    ';\n _.each(files, function(file, i) { ;\n__p += '\\n        ' +\n((__t = ( JST['views/file']({ file: file }) )) == null ? '' : __t) +\n'\\n    ';\n }); ;\n__p += '\\n</ul>';\n\n}\nreturn __p\n},\n\"views/thumbnail\": function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n\n    itemClasses = 'gallery-item';\n\n    if (file.public_url) {\n        itemClasses += ' with-controls image';\n        image = file.public_url;\n        if (!file.is_image) {\n            itemClasses += ' file';\n        } else if (file.thumbnail_public_url) {\n            image = file.thumbnail_public_url;\n        }\n    } else {\n        itemClasses += ' image-placeholder';\n        image = '/hatchly-files/images/module/loader.gif';\n    }\n;\n__p += '\\n<div class=\"' +\n__e( itemClasses ) +\n'\">\\n    <div class=\"content\" style=\"background-image: url(\\'' +\n__e( image ) +\n'\\');\">\\n        <div class=\"o\">\\n            <div class=\"i\">\\n                ';\n if (file.public_url) { ;\n__p += '\\n                    ';\n if (!file.is_image) { ;\n__p += '\\n                        <i class=\"fa fa-file\"></i>\\n                        ';\n \n                            filename = file.name;\n                            if (filename.length > 20) {\n                                filename = file.name.substring(0, 20);\n                            }\n                        ;\n__p += '\\n                        <p class=\"filename\">' +\n__e( filename ) +\n'</p>\\n                    ';\n } else { ;\n__p += '\\n                        ' +\n__e( file.name ) +\n'\\n                    ';\n } ;\n__p += '\\n                ';\n } ;\n__p += '\\n            </div>\\n        </div>\\n    </div>\\n    ';\n if (file.public_url) { ;\n__p += '\\n        <div class=\"controls\">\\n            <div class=\"controls-inner\">\\n                <div class=\"btn-group\" role=\"group\" aria-label=\"actions\">\\n                    ';\n if ($('body').hasClass('page-hatchlyfilesfile-browser')) { ;\n__p += '\\n                        <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Insert file\" data-select-file=\"' +\n__e( file.id ) +\n'\" data-trigger=\"hover\">\\n                            <i class=\"fa fa-link\"></i>\\n                        </button>\\n                    ';\n } else { ;\n__p += '\\n                        <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy link\" data-copy=\"' +\n__e( file.public_url ) +\n'\" data-trigger=\"hover\">\\n                            <i class=\"fa fa-link\"></i>\\n                        </button>\\n                    ';\n } ;\n__p += '\\n                    <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Edit\" data-trigger=\"hover\" data-edit-file-meta=\"' +\n__e( file.id ) +\n'\">\\n                        <i class=\"fa fa-pencil\"></i>\\n                    </button>\\n                    <button type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Delete\" data-trigger=\"hover\" data-delete-file=\\'{ \"id\": ' +\n__e( file.id ) +\n', \"name\": \"' +\n__e( file.name ) +\n'\" }\\'>\\n                        <i class=\"fa fa-close\"></i>\\n                    </button>\\n                </div>\\n            </div>\\n        </div>\\n    ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}};","class List\n\n    type: 'grid'\n    directory: ''\n\n    constructor: ->\n        @setDropzoneDefaults()\n        @events()\n\n    setDropzoneDefaults: ->\n\n    events: ->\n        $(document).ready =>\n            @documentReady()\n\n        $(document).on 'click', '[data-trigger-upload]', (e) =>\n            e.preventDefault()\n            @triggerUpload()\n\n        $(document).on 'click', '[data-navigate-directory]', (e) =>\n            e.preventDefault()\n            @changeDirectory(e)\n\n        $(window).on 'dragenter', @scrollTop\n        $(window).on 'dragleave', @haltScrollTop\n\n    scrollTop: ->\n        $('html, body').animate\n            scrollTop: 0\n        , 250\n\n    haltScrollTop: ->\n        $('html, body').stop()\n\n    triggerUpload: ->\n        $(\"#file_uploader\").find('[type=file]').trigger 'click'\n\n    startLoading: ->\n        $('section.gallery').addClass 'loading'\n\n    finishLoading: ->\n        ZClip.init()\n        $('section.gallery').removeClass 'loading'\n\n    documentReady: ->\n        # Render the file list\n        @getDirectory()\n\n    changeView: (type) ->\n        @type = type\n        @getDirectory()\n\n    changeDirectory: (e) ->\n        $clicked = $(e.currentTarget)\n\n        window.Hatchly.currentDirectory = @directory = $clicked.data 'navigate-directory'\n\n        @getDirectory()\n\n    getDirectory: ->\n        # Add the loader\n        @startLoading()\n        # Perform the request for the\n        # current directory list\n        request = $.ajax\n            url: \"#{Hatchly.admin_url}/files/_ajax/get_directory\"\n            data:\n                directory: @directory\n        # Listen for when the request completes\n        request.done (data, textStatus, jqXHR) =>\n            @files = data\n            alert \"hi\"\n            @render(data)\n        # TODO: Add some error handling, yo\n\n    render: (data) ->\n        # Get the container for the files\n        $container = $('#render')\n        # Get the generated file list\n        filesTemplate = JST[\"views/#{@type}\"]\n            files:   data.files.data\n            folders: data.folders\n        # Update the dom\n        $container.html(filesTemplate)\n        # Re attach events that were lost in the refresh\n        $('[data-toggle=\"tooltip\"]').tooltip\n            container: 'body'\n        # Remove the loader\n        @finishLoading()\n        @attachEvents()\n\n    attachEvents: ->\n        try\n            $(\".file_uploader\").dropzone\n                previewsContainer: \"#render ul\"\n                url:               Hatchly.files.upload_url\n                headers:\n                     'X-CSRF-TOKEN': Hatchly.token\n                sending: (file, xhr, formData) =>\n                    formData.append \"directory_id\", @directory if @directory\n                addedfile: (file) ->\n                    # Get the container\n                    $previewsContainer = $(this.options.previewsContainer)\n                    # Render the file\n                    renderedFile = JST[\"views/file\"]({ file: {} })\n                    if $previewsContainer.find('.folder').length\n                        $previewsContainer.find('.folder').last().closest('li').after(renderedFile)\n                    else\n                        # Insert the new image before\n                        $previewsContainer.prepend(renderedFile)\n                success: (file, response) ->\n                    # Get the container\n                    $previewsContainer = $(this.options.previewsContainer)\n                    # Get the JSON response\n                    fileResponse = JSON.parse(file.xhr.response)\n                    # Render the file\n                    renderedFile = JST[\"views/file\"]({ file: fileResponse })\n                    # Insert the new image before\n                    $previewsContainer.find('.image-placeholder').first().closest('li').replaceWith(renderedFile)\n\n                    ZClip.init()\n\n                error: (file, errorMessage, xhr) ->\n                    # Remove the placeholder\n                    $previewsContainer = $(this.options.previewsContainer)\n                    $previewsContainer.find('.image-placeholder').first().closest('li').remove()\n                    # Show an alert to inform users that it failed\n                    bootbox.alert errorMessage.errors[0]\n        catch err\n            console.log err.message\n            if err.message == 'Dropzone already attached.'\n                console.log 'supress'\n","class ZClipboard\n\n    constructor: ->\n        @init()\n\n    init: ->\n        $(document).on 'mouseenter', '[data-copy]', (e) ->\n            if $(e.target).hasClass 'copy-init'\n                return\n\n            $(e.target).zclip\n                path: '/hatchly-files/vendor/ZeroClipboard.swf',\n                copy: ->\n                    copyVal = $(e.target).data 'copy'\n\n                    return copyVal\n                afterCopy: ->\n                beforeCopy: ->\n\n            $(e.target).addClass 'copy-init'\n","class ConfirmDeleteModal extends window.ConfirmModal\n\n    constructor: ->\n        super\n\n    registerEvents: ->\n        $(document).on 'click submit', \"[data-#{@invoker()}]\", (e, eventData = {}) =>\n            # If it has already been confirmed, we'll let it slide\n            if eventData.confirmed\n                return true\n            # Otherwise halt the action and show the modal\n            e.preventDefault()\n            @setupModal(e)\n            @show()\n\n    setupModal: (e) ->\n        super\n        $invoker = $(e.currentTarget)\n        invokerData = $invoker.data(@invoker())\n        @config.title = \"Deleting '#{invokerData.name}'\"\n\n    confirmCallback: (e) ->\n        # Perform a hard delete if we're on the file manager\n        if Page.is 'filesindex'\n            @deleteFromFileManager(e)\n        # Just remove it from the form\n        if Page.is('pagesedit') or Page.is('pagescreate')\n            @deleteFromForm(e)\n\n    deleteFromFileManager: (e) ->\n        $invoker = $(e.currentTarget)\n        invokerData = $invoker.data(@invoker())\n\n        # We need to fire off an ajax request to delete the file\n        response = $.ajax\n            url:  \"#{Hatchly.files.delete_url}/#{invokerData.id}\"\n            type: 'DELETE'\n            headers:\n                'X-CSRF-TOKEN': Hatchly.token\n\n        # Callback handlers\n        response.success (data, textStatus, jqXHR) =>\n            @responseSuccess(e, data, textStatus, jqXHR)\n        response.error (jqXHR, textStatus, errorThrown) =>\n            @responseError(e, jqXHR, textStatus, errorThrown)\n        response.complete (jqXHR, textStatus) =>\n            @responseComplete(e, jqXHR, textStatus)\n\n        return false\n\n    deleteFromForm: (e) ->\n        $clicked = $(e.currentTarget)\n        # Get the thumbnail block\n        $thumbnail = $clicked.closest('.image-upload-group')\n        # Remove the input value\n        $thumbnail.find('input').val ''\n        # Remove the thumbnail view\n        $thumbnail.find('.thumbnail')\n            .data('thumbnail', '')\n            .data('src', '')\n            .data('id', '')\n            .empty()\n\n    responseSuccess: (e, data, textStatus, jqXHR) ->\n        # Remove the file thumbnail from the grid\n        $invoker = $(e.currentTarget)\n        $invoker.closest('li').fadeOut().remove()\n        # Add success message\n        # @addMessages(data.successes, 'success')\n        # Close modal\n        @close()\n\n    responseError: (e, jqXHR, textStatus, errorThrown) ->\n        console.log jqXHR, textStatus, errorThrown\n\n    responseComplete: (e, jqXHR, textStatus) ->\n\n    modalContent: ->\n        return \"Are you sure you want to delete this file? This cannot be undone.\"\n\n    invoker: ->\n        return \"delete-file\"\n\n","class ConfirmFolderDeleteModal extends window.ConfirmModal\n\n    constructor: ->\n        super\n\n    registerEvents: ->\n        $(document).on 'click submit', \"[data-#{@invoker()}]\", (e, eventData = {}) =>\n            # If it has already been confirmed, we'll let it slide\n            if eventData.confirmed\n                return true\n            # Otherwise halt the action and show the modal\n            e.preventDefault()\n            @setupModal(e)\n            @show()\n\n    setupModal: (e) ->\n        super\n        $invoker = $(e.currentTarget)\n        invokerData = $invoker.data(@invoker())\n        @config.title = \"Deleting '#{invokerData.name}'\"\n\n    confirmCallback: (e) ->\n        @deleteFromFileManager(e)\n\n    deleteFromFileManager: (e) ->\n        $invoker = $(e.currentTarget)\n        invokerData = $invoker.data(@invoker())\n\n        # We need to fire off an ajax request to delete the file\n        response = $.ajax\n            url:  \"#{Hatchly.files.delete_folder_url}/#{invokerData.id}\"\n            type: 'DELETE'\n            headers:\n                'X-CSRF-TOKEN': Hatchly.token\n\n        # Callback handlers\n        response.success (data, textStatus, jqXHR) =>\n            @responseSuccess(e, data, textStatus, jqXHR)\n        response.error (jqXHR, textStatus, errorThrown) =>\n            @responseError(e, jqXHR, textStatus, errorThrown)\n        response.complete (jqXHR, textStatus) =>\n            @responseComplete(e, jqXHR, textStatus)\n\n        return false\n\n    responseSuccess: (e, data, textStatus, jqXHR) ->\n        # Remove the file thumbnail from the grid\n        $invoker = $(e.currentTarget)\n        $invoker.closest('li').fadeOut().remove()\n        # Add success message\n        # @addMessages(data.successes, 'success')\n        # Close modal\n        @close()\n\n    responseError: (e, jqXHR, textStatus, errorThrown) ->\n        console.log jqXHR, textStatus, errorThrown\n\n    responseComplete: (e, jqXHR, textStatus) ->\n\n    modalContent: ->\n        return \"Are you sure you want to delete this folder? This cannot be undone.\"\n\n    invoker: ->\n        return \"delete-folder\"\n\n","class FileMetaModal\n\n    constructor: ->\n        $(document).on 'click', '[data-edit-file-meta]', (e) =>\n            e.preventDefault()\n            @getModalContent(e)\n\n    getModalContent: (e) ->\n        $clicked = $(e.currentTarget)\n        fileId = $clicked.data 'edit-file-meta'\n        originalValue = $clicked.html()\n        @startLoading($clicked)\n        $.ajax\n            url: \"/admin/files/_ajax/get_meta_form/#{fileId}\"\n            success: (data) =>\n                @prepareForModal(data)\n            complete: =>\n                @stopLoading($clicked, originalValue)\n\n    startLoading: (e) ->\n        $(e).html('<i class=\"fa fa-spinner fa-spin\"></i>')\n\n    stopLoading: (e, originalValue) ->\n        $(e).html(originalValue)\n\n    prepareForModal: (data) ->\n        # Do any manipulation here\n        @show(data)\n\n    show: (data) ->\n        @modal = bootbox.dialog\n            message:  '<div id=\"modal-messages\"></div>' + data,\n            title:    \"Edit file meta data\"\n            onEscape: ->\n                return\n\n        @modal.on 'shown.bs.modal', =>\n            @registerMetaFormEvents()\n\n    registerMetaFormEvents: ->\n        @addToken()\n        @modal.off('Hatchly.AjaxForm.submitted').on 'Hatchly.AjaxForm.submitted', 'form', (e, eventData) =>\n            $(e.currentTarget).find('input[type=submit], button[type=submit]').addClass 'disabled'\n            @clearMessages()\n        # Ajax callbacks\n        # Success\n        @modal.off('Hatchly.AjaxForm.success').on 'Hatchly.AjaxForm.success', 'form', (e, eventData) =>\n            @generateMessages(eventData.callback.data.messages, eventData.callback.jqXHR.status)\n            setTimeout ( =>\n                @modal.modal('hide')\n            ), 500\n        # Error\n        @modal.off('Hatchly.AjaxForm.error').on 'Hatchly.AjaxForm.error', 'form', (e, eventData) =>\n            @generateMessages(eventData.callback.jqXHR.responseJSON.messages, eventData.callback.jqXHR.status)\n        # Complete\n        @modal.off('Hatchly.AjaxForm.complete').on 'Hatchly.AjaxForm.complete', 'form', (e, eventData) =>\n            $(e.currentTarget).find('input[type=submit], button[type=submit]').removeClass 'disabled'\n\n    generateMessages: (messages, status) ->\n        @clearMessages()\n        $('#modal-messages').html CoreJST['alerts']({ messages:  messages, status: status })\n\n    clearMessages: ->\n        $('#modal-messages').html ''\n\n    addToken: ->\n        # Add csrf token to the form\n        @modal.find('form').each (i, el) =>\n            if !$(el).find('input[name=_token]').length\n                $(el).prepend '<input type=\"hidden\" name=\"_token\">'\n            @addTokenValue(el)\n\n    addTokenValue: (el) ->\n        $(el).find('input[name=_token]').val Hatchly.token","class FolderModal\n\n    @currentDirectory = null\n\n    constructor: ->\n        $(document).on 'click', '[data-edit-folder]', (e) =>\n            e.preventDefault()\n            @getModalContent(e)\n        $(document).on 'click', '[data-add-folder]', (e) =>\n            e.preventDefault()\n            @getModalContent(e)\n\n    getModalContent: (e, folderId = false) ->\n        $clicked = $(e.currentTarget)\n        if $clicked.data('edit-folder') \n            folderId = $clicked.data 'edit-folder'\n\n        originalValue = $clicked.html()\n        @startLoading($clicked)\n\n        endpoint = \"/admin/files/_ajax/edit_folder\"\n        \n        if !folderId\n            folderId = 0\n\n        endpoint = \"#{endpoint}/#{folderId}\"\n\n        if window.Hatchly.currentDirectory\n            endpoint = \"#{endpoint}/#{window.window.Hatchly.currentDirectory}\"\n\n        $.ajax\n            url: endpoint\n            success: (data) =>\n                @prepareForModal(data, folderId)\n            complete: =>\n                @stopLoading($clicked, originalValue)\n\n    startLoading: (e) ->\n        $(e).html('<i class=\"fa fa-spinner fa-spin\"></i>')\n\n    stopLoading: (e, originalValue) ->\n        $(e).html(originalValue)\n\n    prepareForModal: (data, folderId) ->\n        # Do any manipulation here\n        @show(data, folderId)\n\n    show: (data, folderId) ->\n        prefix = if folderId then 'Edit' else 'Create new'\n        @modal = bootbox.dialog\n            message:  '<div id=\"modal-messages\"></div>' + data,\n            title:    \"#{prefix} folder\"\n            onEscape: ->\n                return\n\n        @modal.on 'shown.bs.modal', =>\n            @registerMetaFormEvents()\n\n    registerMetaFormEvents: ->\n        @addToken()\n        @modal.off('Hatchly.AjaxForm.submitted').on 'Hatchly.AjaxForm.submitted', 'form', (e, eventData) =>\n            $(e.currentTarget).find('input[type=submit], button[type=submit]').addClass 'disabled'\n            @clearMessages()\n        # Ajax callbacks\n        # Success\n        @modal.off('Hatchly.AjaxForm.success').on 'Hatchly.AjaxForm.success', 'form', (e, eventData) =>\n            @generateMessages(eventData.callback.data.messages, eventData.callback.jqXHR.status)\n            setTimeout ( =>\n                @modal.modal('hide')\n                window.location.reload(true)\n            ), 500\n        # Error\n        @modal.off('Hatchly.AjaxForm.error').on 'Hatchly.AjaxForm.error', 'form', (e, eventData) =>\n            @generateMessages(eventData.callback.jqXHR.responseJSON.messages, eventData.callback.jqXHR.status)\n        # Complete\n        @modal.off('Hatchly.AjaxForm.complete').on 'Hatchly.AjaxForm.complete', 'form', (e, eventData) =>\n            $(e.currentTarget).find('input[type=submit], button[type=submit]').removeClass 'disabled'\n\n    generateMessages: (messages, status) ->\n        @clearMessages()\n        $('#modal-messages').html CoreJST['alerts']({ messages:  messages, status: status })\n\n    clearMessages: ->\n        $('#modal-messages').html ''\n\n    addToken: ->\n        # Add csrf token to the form\n        @modal.find('form').each (i, el) =>\n            if !$(el).find('input[name=_token]').length\n                $(el).prepend '<input type=\"hidden\" name=\"_token\">'\n            @addTokenValue(el)\n\n    addTokenValue: (el) ->\n        $(el).find('input[name=_token]').val Hatchly.token","class FileBrowser\n\n    constructor: ->\n        @registerEvents()\n\n    registerEvents: ->\n        $(document).on 'click', '[data-select-file]', (e) =>\n            @selectFile(e)\n\n    selectFile: (e) ->\n        # Get selected\n        $selected = $(e.currentTarget)\n        id = $selected.data 'select-file'\n\n        @returnSelectedFile(id)\n\n    returnSelectedFile: (id) ->\n        $request = $.ajax\n            url:  \"/admin/files/_ajax/get_file/#{id}\"\n            type: \"GET\"\n        $request.success (data, textStatus, jqXHR) ->\n            # trigger event\n            parent.$('body').trigger 'Hatchly.files.file-selected', data.file\n            parent.$('body').trigger 'Hatchly.Files.existingFileSelected', data.file","class FileBrowserModal\n\n    constructor: ->\n        @registerEvents()\n\n        this.$clicked = null\n\n        this.modal = null\n\n    registerEvents: ->\n        $(document).on 'click', '[data-select-existing-file]', (e) =>\n            this.$clicked = $(e.currentTarget)\n            @openFileBrowser()\n\n        $(document).on 'Hatchly.Files.existingFileSelected', 'body', (e, data) =>\n            if this.$clicked\n                @insertFile(data)\n\n    openFileBrowser: ->\n        @modal = bootbox.dialog({\n            message: \"<iframe src=\\\"#{Hatchly.admin_url}/files/file-browser\\\" frameborder=\\\"0\\\" style=\\\"width: 100%; height: 500px;\\\"></iframe>\"\n        })\n        @modal.on 'shown.bs.modal', =>\n            @modal.find('iframe')[0].contentWindow.location = @modal.find('iframe').attr('src')\n        @modal.on 'hidden.bs.modal', =>\n            this.$clicked = false\n\n    insertFile: (file) ->\n        $field = this.$clicked.closest('.image-upload-group')\n\n        $thumbnail = $field.find('.thumbnail')\n        $thumbnail.attr('data-thumbnail', '')\n\n        $thumbnail.attr('data-src', if file.thumbnail then file.thumbnail.public_url else file.public_url)\n        $thumbnail.attr('data-id', file.id)\n        $thumbnail.attr('data-image', file.is_image)\n        $thumbnail.attr('data-file-name', file.name)\n\n        $field.find(\"input[name='#{$thumbnail.data('input-name')}']\").val(file.id)\n\n        @modal.modal('hide')\n\n        $('body').trigger('Hatchly.Core.fieldsAdded')","class InlineFileUpload\n\n    constructor: ->\n        @generateThumbnails()\n        @setupDropZone()\n        @registerEvents()\n\n    registerEvents: ->\n        $('body').on 'Hatchly.Core.fieldsAdded', =>\n            @generateThumbnails()\n            @setupDropZone()\n\n    generateThumbnails: ->\n        $('[data-thumbnail]').each (i, el) =>\n            if $(el).attr('data-thumbnail') == 'generated' || $(el).attr('data-src') == ''\n                return\n            thumbnail = JST[\"views/thumbnail\"]({\n                file:\n                    public_url: $(el).attr 'data-src'\n                    name:       $(el).attr 'data-file-name'\n                    id:         $(el).attr 'data-id'\n                    is_image:   $(el).attr 'data-image'\n            })\n\n            $(el).html thumbnail\n            $(el).attr 'data-thumbnail', 'generated'\n        ZClip.init()\n        \n    setupDropZone: ->\n        $(\".file_uploader\").each (i, el) ->\n            if $(el).hasClass 'dz-clickable'\n                return\n            name = $(el).data('name')\n            $(el).dropzone\n                previewsContainer: \"[data-input-name='#{name}']\"\n                url:               $(el).data 'action'\n                paramName:         'file'\n                headers:\n                     'X-CSRF-TOKEN': Hatchly.token\n                addedfile: (file) ->\n                    # Get the container\n                    $previewsContainer = $(this.options.previewsContainer)\n                    # Render the file\n                    renderedFile = JST[\"views/thumbnail\"]({ file: {} })\n                    # Insert the new image before\n                    $previewsContainer.html(renderedFile)\n                success: (file, response) ->\n                    # Get the container\n                    $previewsContainer = $(this.options.previewsContainer)\n                    # Get the JSON response\n                    fileResponse = JSON.parse(file.xhr.response)\n                    # Render the file\n                    renderedFile = JST[\"views/thumbnail\"]({ file: fileResponse })\n                    # Insert the new image before\n                    $previewsContainer.find('.gallery-item').replaceWith(renderedFile)\n                    # Add the id to the file input\n                    $(\"[name='#{name}']\").val(fileResponse.id)\n                    ZClip.init()\n\n                error: (file, errorMessage, xhr) ->\n                    # Remove the placeholder\n                    $previewsContainer = $(this.options.previewsContainer)\n                    $previewsContainer.find('.gallery-item').remove()\n                    # Show an alert to inform users that it failed\n                    bootbox.alert errorMessage.errors[0]\n\n        $('[data-toggle=\"tooltip\"]').tooltip\n            container: 'body'\n","class Files\n\n    constructor: ->\n        new List\n","# Define pages\nZClip = new ZClipboard\nnew ConfirmDeleteModal\n\nif Page.is 'filesindex'\n    new ConfirmFolderDeleteModal\n    new Files(new FileMetaModal, new FolderModal)\n\nif Page.is 'pagesedit'\n    new FileBrowserModal\n    new InlineFileUpload(new FileMetaModal)\n\nif Page.is 'filesfile-browser'\n    new FileBrowser\n"]}